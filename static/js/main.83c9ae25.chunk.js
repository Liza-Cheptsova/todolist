(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{107:function(t,e,a){t.exports=a(143)},112:function(t,e,a){},113:function(t,e,a){},143:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=(a(112),a(188)),l=a(182),u=(a(113),a(174)),s=a(178),d=a(179),f=a(180),m=a(181),b=a(91),E=a.n(b),O=a(12),p=a(7),T={status:"loading",error:null},v=function(t){return{type:"APP/SET-STATUS",status:t}},g=function(t){return{type:"APP/SET-ERROR",error:t}},h=a(57),j=a.n(h),I=j.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"94c9f385-f2db-498c-b99f-a10b7cce6547"}}),S=function(){return I.get("todo-lists")},k=function(t){return I.post("todo-lists",{title:t})},y=function(t,e){return I.put("todo-lists/".concat(t),{title:e})},C=function(t){return I.delete("todo-lists/".concat(t))},A=function(t){return I.post("auth/login",t)},L=function(){return I.get("auth/me")},w=function(){return I.delete("auth/login")},D=function(t,e){t.messages.length?e(g(t.messages[0])):e(g("Some error occurred")),e(v("failed"))},N=function(t,e){e(g(t.message)),e(v("failed"))},P={isLoggedIn:!1,isInitialized:!1},R=function(t){return{type:"login/SET-IS-LOGGED-IN",value:t}},F=function(){var t=Object(O.c)((function(t){return t.app.status})),e=Object(O.c)((function(t){return t.auth.isLoggedIn})),a=Object(O.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{position:"static"},r.a.createElement(s.a,{className:"header"},r.a.createElement(d.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(E.a,null)),e&&r.a.createElement(f.a,{color:"inherit",onClick:function(){a((function(t){t(v("loading")),w().then((function(e){0===e.data.resultCode?(t(R(!1)),t(v("succeeded"))):D(e.data,t)})).catch((function(e){N(e,t)}))}))}},"LogOut"))),r.a.createElement("div",null,"loading"===t&&r.a.createElement(m.a,null)))},K=a(193),x=a(190);function U(t){return r.a.createElement(x.a,Object.assign({elevation:6,variant:"filled"},t))}function G(){var t=Object(O.c)((function(t){return t.app.error})),e=Object(O.b)(),a=function(t,a){e(g(null))};return r.a.createElement(K.a,{open:null!==t,autoHideDuration:6e3,onClose:a},r.a.createElement(U,{onClose:a,severity:"error"},t))}var M,H,V=a(15),Y=a(183),Z=a(184),_=a(185),q=a(189),z=a(194),B=a(191),W=a(95),J=function(){var t=Object(O.b)(),e=Object(O.c)((function(t){return t.auth.isLoggedIn})),a=Object(W.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<5&&(e.password="Must be more then 5 characters"):e.password="Required",e},onSubmit:function(e){var n;t((n=e,function(t){t(v("loading")),A(n).then((function(e){0===e.data.resultCode?(t(R(!0)),t(v("succeeded"))):D(e.data,t)})).catch((function(e){N(e,t)}))})),a.resetForm()}});return e?r.a.createElement(V.a,{to:"/"}):r.a.createElement(l.a,{container:!0,justify:"center"},r.a.createElement(l.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement(Y.a,null,r.a.createElement(Z.a,null,r.a.createElement("p",null,"To log in get registered",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(_.a,null,r.a.createElement(q.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?r.a.createElement("div",{style:{color:"red"}},a.errors.email):null,r.a.createElement(q.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password?r.a.createElement("div",{style:{color:"red"}},a.errors.password):null,r.a.createElement(z.a,{label:"Remember me",control:r.a.createElement(B.a,a.getFieldProps("rememberMe"))}),r.a.createElement(f.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},$=a(144),Q=a(46),X=a(54),tt=Object(X.v1)(),et=(Object(X.v1)(),[]),at=a(47),nt=a(186),rt=r.a.memo((function(t){var e=Object(n.useState)(""),a=Object(at.a)(e,2),i=a[0],c=a[1],o=Object(n.useState)(null),l=Object(at.a)(o,2),u=l[0],s=l[1],f=function(){""!==i.trim()?(t.addTask(i),c("")):s("Title is required")};return r.a.createElement("div",null,r.a.createElement(q.a,{value:i,disabled:t.disabled,label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442",helperText:u,error:!!u,onChange:function(t){t.preventDefault(),c(t.currentTarget.value)},onKeyPress:function(t){null!==u&&s(null),13===t.charCode&&f()},color:"primary",variant:"outlined"}),r.a.createElement(d.a,{color:"primary",onClick:f,disabled:t.disabled},r.a.createElement(nt.a,null)))})),it=r.a.memo((function(t){var e=Object(n.useState)(!1),a=Object(at.a)(e,2),i=a[0],c=a[1],o=Object(n.useState)(t.value),l=Object(at.a)(o,2),u=l[0],s=l[1];console.log("props.disabled: ",t.disabled);var d=function(){c(!i),""!==u.trim()&&t.newTitle(u)};return i?r.a.createElement(q.a,{type:"text",value:u,onChange:function(t){s(t.currentTarget.value)},autoFocus:!0,onBlur:d,onKeyPress:function(t){13===t.charCode&&d()}}):r.a.createElement("span",{onDoubleClick:function(){c(!i),s(t.value),t.disabled&&c(!1)}},t.value)})),ct=a(187),ot=a(49),lt=j.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1//todo-lists/",withCredentials:!0,headers:{"API-KEY":"94c9f385-f2db-498c-b99f-a10b7cce6547"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(M||(M={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(H||(H={}));var ut=function(t){return lt.get("".concat(t,"/tasks"))},st=function(t,e){return lt.post("".concat(t,"/tasks"),{title:e})},dt=function(t,e,a){return lt.put("".concat(t,"/tasks/").concat(e),a)},ft=function(t,e){return lt.delete("".concat(t,"/tasks/").concat(e))},mt=Object(ot.a)({},tt,[{id:Object(X.v1)(),title:"HTML",status:M.Completed,description:"",completed:!1,priority:H.Low,startDate:"",deadline:"",todoListId:tt,order:0,addedDate:"",entityStatus:"idle"}]),bt=function(t,e,a){return function(n,r){n(v("loading"));var i=r().tasks[a].find((function(e){return e.id===t}));i&&dt(a,t,Object(p.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},e)).then((function(r){0===r.data.resultCode?(n(function(t,e,a){return{type:"UPDATE-TASK",taskId:t,model:e,todolistId:a}}(t,e,a)),n(v("succeeded"))):D(r.data,n)})).catch((function(t){N(t,n)}))}},Et=r.a.memo((function(t){var e=Object(O.b)(),a=Object(n.useCallback)((function(a){e(bt(t.task.id,{title:a},t.todolistId))}),[e,t.todolistId,t.task.id]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{key:t.task.id,className:t.task.status===M.Completed?"is-done":""},r.a.createElement(B.a,{color:"primary",inputProps:{"aria-label":"secondary checkbox"},onChange:function(a){var n=a.currentTarget.checked?M.Completed:M.New;e(bt(t.task.id,{status:n},t.todolistId))},checked:t.task.status===M.Completed,disabled:t.disabled}),r.a.createElement(it,{value:t.task.title,newTitle:a,disabled:t.disabled}),r.a.createElement(d.a,{onClick:function(){return e((a=t.todolistId,n=t.task.id,function(t){t(v("loading")),t(function(t,e,a){return{type:"SET-TASK-ENTITY-STATUS",todolistId:t,taskId:e,entityStatus:a}}(a,n,"loading")),ft(a,n).then((function(e){0===e.data.resultCode?(t(function(t,e){return{type:"REMOVE-TASK",taskId:e,todolistId:t}}(a,n)),t(v("succeeded"))):D(e.data,t)})).catch((function(e){N(e,t)}))}));var a,n},disabled:t.disabled},r.a.createElement(ct.a,null))))})),Ot=function(t){var e=Object(O.c)((function(e){return e.tasks[t.todolist.id]})),a=Object(O.b)();Object(n.useEffect)((function(){var e;a((e=t.todolist.id,function(t){t(v("loading")),ut(e).then((function(a){var n=a.data.items;t(function(t,e){return{type:"SET-TASK",tasks:t,todolistId:e}}(n,e)),t(v("succeeded"))}))}))}),[a,t.todolist.id]);var i=Object(n.useCallback)((function(){t.removeTodolist(t.todolist.id)}),[t]),c=Object(n.useCallback)((function(e){a(function(t,e){return function(a){a(v("loading")),st(t,e).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;a(function(t){return{type:"ADD-TASK",task:t}}(e)),a(v("succeeded"))}else D(t.data,a)})).catch((function(t){N(t,a)}))}}(t.todolist.id,e))}),[a,t]),o=Object(n.useCallback)((function(e){t.newTodolistTitle(t.todolist.id,e)}),[t]),l=Object(n.useCallback)((function(){return t.changeFilter("all",t.todolist.id)}),[t]),u=Object(n.useCallback)((function(){return t.changeFilter("active",t.todolist.id)}),[t]),s=Object(n.useCallback)((function(){return t.changeFilter("completed",t.todolist.id)}),[t]),m=e,b=m;return"active"===t.todolist.filter&&(b=m.filter((function(t){return!t.status}))),"completed"===t.todolist.filter&&(b=m.filter((function(t){return t.status}))),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(it,{value:t.todolist.title,newTitle:o,disabled:"loading"===t.todolist.entityStatus}),r.a.createElement(d.a,{"aria-label":"delete",onClick:i,disabled:"loading"===t.todolist.entityStatus},r.a.createElement(ct.a,null))),r.a.createElement(rt,{addTask:c,disabled:"loading"===t.todolist.entityStatus}),r.a.createElement("ul",{className:"tasks_container"},b.map((function(e){return r.a.createElement(Et,{task:e,todolistId:t.todolist.id,key:e.id,disabled:"loading"===e.entityStatus})}))),r.a.createElement("div",{className:"btns_container"},r.a.createElement(f.a,{color:"inherit",onClick:l,variant:"all"===t.todolist.filter?"outlined":"text"},"All"),r.a.createElement(f.a,{color:"primary",onClick:u,variant:"active"===t.todolist.filter?"outlined":"text"},"Active"),r.a.createElement(f.a,{color:"secondary",onClick:s,variant:"completed"===t.todolist.filter?"outlined":"text"},"Completed")))},pt=function(){var t=Object(O.c)((function(t){return t.todolists})),e=Object(O.b)();Object(n.useEffect)((function(){s&&e((function(t){t(v("loading")),S().then((function(e){t({type:"SET-TODOLIST",todolists:e.data}),t(v("succeeded"))})).catch((function(e){N(e,t)}))}))}),[e]);var a=Object(n.useCallback)((function(t){var a;e((a=t,function(t){t(v("loading")),t({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:a,entityStatus:"loading"}),C(a).then((function(e){0===e.data.resultCode?(t(function(t){return{type:"REMOVE-TODOLIST",id:t}}(a)),t(v("succeeded"))):D(e.data,t)})).catch((function(e){N(e,t)}))}))}),[e]),i=Object(n.useCallback)((function(t,a){e(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",filter:t,id:e}}(t,a))}),[e]),c=Object(n.useCallback)((function(t){e(function(t){return function(e){e(v("loading")),k(t).then((function(t){if(0===t.data.resultCode){var a=t.data.data.item;e({type:"ADD-TODOLIST",todolist:a}),e(v("succeeded"))}else D(t.data,e)})).catch((function(t){N(t,e)}))}}(t))}),[e]),u=Object(n.useCallback)((function(t,a){var n,r;e((n=t,r=a,function(t){t(v("loading")),y(n,r).then((function(e){0===e.data.resultCode?(t(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(n,r)),t(v("succeeded"))):D(e.data,t)})).catch((function(e){N(e,t)}))}))}),[e]),s=Object(O.c)((function(t){return t.auth.isLoggedIn}));return s?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{fixed:!0},r.a.createElement(l.a,{container:!0,style:{padding:"20px 0"}},r.a.createElement(rt,{addTask:c})),r.a.createElement(l.a,{container:!0,spacing:4},t.map((function(t){return r.a.createElement(l.a,{item:!0,key:t.id},r.a.createElement($.a,{style:{padding:"10px"},elevation:3},r.a.createElement(Ot,{key:t.id,todolist:t,removeTodolist:a,changeFilter:i,newTodolistTitle:u})))}))))):r.a.createElement(V.a,{to:"/login"})},Tt=function(){Object(O.c)((function(t){return t.auth.isInitialized}));var t=Object(O.b)();return Object(n.useEffect)((function(){t((function(t){L().then((function(e){0===e.data.resultCode?(t({type:"login/SET-INITIALIZED",value:!0}),t(R(!0))):D(e.data,t)})).catch((function(e){N(e,t)}))}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(G,null),r.a.createElement(F,null),r.a.createElement(o.a,{fixed:!0},r.a.createElement(l.a,{container:!0,justify:"center",spacing:4},r.a.createElement(V.d,null,r.a.createElement(V.b,{exact:!0,path:"/",render:function(){return r.a.createElement(pt,null)}}),r.a.createElement(V.b,{path:"/login",render:function(){return r.a.createElement(J,null)}}),r.a.createElement(V.b,{path:"/404",render:function(){return r.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),r.a.createElement(V.a,{from:"*",to:"/404"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vt=a(64),gt=a(94),ht=Object(vt.b)({todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"ADD-TODOLIST":var a=Object(p.a)(Object(p.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"});return[a].concat(Object(Q.a)(t));case"CHANGE-TODOLIST-TITLE":var n=t.find((function(t){return t.id===e.id}));return n&&(n.title=e.title),Object(Q.a)(t);case"CHANGE-TODOLIST-FILTER":var r=t.find((function(t){return t.id===e.id}));return r&&(r.filter=e.filter),Object(Q.a)(t);case"SET-TODOLIST":return e.todolists.map((function(t){return Object(p.a)(Object(p.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(p.a)(Object(p.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":var a=Object(p.a)({},t),n=t[e.todolistId];return a[e.todolistId]=n.filter((function(t){return t.id!==e.taskId})),a;case"ADD-TASK":var r=Object(p.a)({},t),i=e.task,c=r[i.todoListId],o=[i].concat(Object(Q.a)(c));return r[i.todoListId]=o,r;case"SET-TASK":var l=Object(p.a)({},t);return l[e.todolistId]=e.tasks,l;case"UPDATE-TASK":var u=Object(p.a)({},t),s=u[e.todolistId];return u[e.todolistId]=s.map((function(t){return t.id===e.taskId?Object(p.a)(Object(p.a)({},t),e.model):t})),u;case"NEW-TASK-TITLE":var d=Object(p.a)({},t);return d[e.todolistId]=d[e.todolistId].map((function(t){return t.id===e.taskId?Object(p.a)(Object(p.a)({},t),{},{title:e.newTitle}):t})),d;case"ADD-TODOLIST":return Object(p.a)(Object(p.a)({},t),{},Object(ot.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var f=Object(p.a)({},t);return delete f[e.id],f;case"SET-TODOLIST":var m=Object(p.a)({},t);return e.todolists.forEach((function(t){m[t.id]=[]})),m;case"SET-TASK-ENTITY-STATUS":var b=Object(p.a)({},t);return b[e.todolistId]=b[e.todolistId].map((function(t){return t.id===e.taskId?Object(p.a)(Object(p.a)({},t),{},{entityStatus:e.entityStatus}):t})),b;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(p.a)(Object(p.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(p.a)(Object(p.a)({},t),{},{error:e.error});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET-IS-LOGGED-IN":return Object(p.a)(Object(p.a)({},t),{},{isLoggedIn:e.value});case"login/SET-INITIALIZED":return Object(p.a)(Object(p.a)({},t),{},{isInitialized:e.value});default:return t}}}),jt=Object(vt.c)(ht,Object(vt.a)(gt.a)),It=a(48);c.a.render(r.a.createElement(O.a,{store:jt},r.a.createElement(It.a,null,r.a.createElement(Tt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[107,1,2]]]);
//# sourceMappingURL=main.83c9ae25.chunk.js.map