(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{107:function(t,e,a){t.exports=a(143)},112:function(t,e,a){},113:function(t,e,a){},143:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=(a(112),a(189)),l=a(188),u=a(182),s=(a(113),a(174)),d=a(178),f=a(179),m=a(180),b=a(181),E=a(91),O=a.n(E),p=a(12),T=a(7),v={status:"loading",error:null},g=function(t){return{type:"APP/SET-STATUS",status:t}},h=function(t){return{type:"APP/SET-ERROR",error:t}},j=a(57),I=a.n(j),S=I.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"94c9f385-f2db-498c-b99f-a10b7cce6547"}}),k=function(){return S.get("todo-lists")},y=function(t){return S.post("todo-lists",{title:t})},C=function(t,e){return S.put("todo-lists/".concat(t),{title:e})},A=function(t){return S.delete("todo-lists/".concat(t))},w=function(t){return S.post("auth/login",t)},L=function(){return S.get("auth/me")},D=function(){return S.delete("auth/login")},N=function(t,e){t.messages.length?e(h(t.messages[0])):e(h("Some error occurred")),e(g("failed"))},P=function(t,e){e(h(t.message)),e(g("failed"))},R={isLoggedIn:!1,isInitialized:!1},x=function(t){return{type:"login/SET-IS-LOGGED-IN",value:t}},F=function(){var t=Object(p.c)((function(t){return t.app.status})),e=Object(p.c)((function(t){return t.auth.isLoggedIn})),a=Object(p.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{position:"static"},r.a.createElement(d.a,{className:"header"},r.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(O.a,null)),e&&r.a.createElement(m.a,{color:"inherit",onClick:function(){a((function(t){t(g("loading")),D().then((function(e){0===e.data.resultCode?(t(x(!1)),t(g("succeeded"))):N(e.data,t)})).catch((function(e){P(e,t)}))}))}},"LogOut"))),r.a.createElement("div",null,"loading"===t&&r.a.createElement(b.a,null)))},K=a(194),U=a(191);function G(t){return r.a.createElement(U.a,Object.assign({elevation:6,variant:"filled"},t))}function M(){var t=Object(p.c)((function(t){return t.app.error})),e=Object(p.b)(),a=function(t,a){e(h(null))};return r.a.createElement(K.a,{open:null!==t,autoHideDuration:6e3,onClose:a},r.a.createElement(G,{onClose:a,severity:"error"},t))}var H,V,Y=a(15),Z=a(183),_=a(184),q=a(185),z=a(190),B=a(195),W=a(192),J=a(95),$=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.auth.isLoggedIn})),a=Object(J.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<5&&(e.password="Must be more then 5 characters"):e.password="Required",e},onSubmit:function(e){var n;t((n=e,function(t){t(g("loading")),w(n).then((function(e){0===e.data.resultCode?(t(x(!0)),t(g("succeeded"))):N(e.data,t)})).catch((function(e){P(e,t)}))})),a.resetForm()}});return e?r.a.createElement(Y.a,{to:"/"}):r.a.createElement(u.a,{container:!0,justify:"center"},r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement(Z.a,null,r.a.createElement(_.a,null,r.a.createElement("p",null,"To log in get registered",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(q.a,null,r.a.createElement(z.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?r.a.createElement("div",{style:{color:"red"}},a.errors.email):null,r.a.createElement(z.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password?r.a.createElement("div",{style:{color:"red"}},a.errors.password):null,r.a.createElement(B.a,{label:"Remember me",control:r.a.createElement(W.a,a.getFieldProps("rememberMe"))}),r.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},Q=a(144),X=a(46),tt=a(54),et=Object(tt.v1)(),at=(Object(tt.v1)(),[]),nt=a(47),rt=a(186),it=r.a.memo((function(t){var e=Object(n.useState)(""),a=Object(nt.a)(e,2),i=a[0],c=a[1],o=Object(n.useState)(null),l=Object(nt.a)(o,2),u=l[0],s=l[1],d=function(){""!==i.trim()?(t.addTask(i),c("")):s("Title is required")};return r.a.createElement("div",null,r.a.createElement(z.a,{value:i,disabled:t.disabled,label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442",helperText:u,error:!!u,onChange:function(t){t.preventDefault(),c(t.currentTarget.value)},onKeyPress:function(t){null!==u&&s(null),13===t.charCode&&d()},color:"primary",variant:"outlined"}),r.a.createElement(f.a,{color:"primary",onClick:d,disabled:t.disabled},r.a.createElement(rt.a,null)))})),ct=r.a.memo((function(t){var e=Object(n.useState)(!1),a=Object(nt.a)(e,2),i=a[0],c=a[1],o=Object(n.useState)(t.value),l=Object(nt.a)(o,2),u=l[0],s=l[1];console.log("props.disabled: ",t.disabled);var d=function(){c(!i),""!==u.trim()&&t.newTitle(u)};return i?r.a.createElement(z.a,{type:"text",value:u,onChange:function(t){s(t.currentTarget.value)},autoFocus:!0,onBlur:d,onKeyPress:function(t){13===t.charCode&&d()}}):r.a.createElement("span",{onDoubleClick:function(){c(!i),s(t.value),t.disabled&&c(!1)}},t.value)})),ot=a(187),lt=a(49),ut=I.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1//todo-lists/",withCredentials:!0,headers:{"API-KEY":"94c9f385-f2db-498c-b99f-a10b7cce6547"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(H||(H={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(V||(V={}));var st=function(t){return ut.get("".concat(t,"/tasks"))},dt=function(t,e){return ut.post("".concat(t,"/tasks"),{title:e})},ft=function(t,e,a){return ut.put("".concat(t,"/tasks/").concat(e),a)},mt=function(t,e){return ut.delete("".concat(t,"/tasks/").concat(e))},bt=Object(lt.a)({},et,[{id:Object(tt.v1)(),title:"HTML",status:H.Completed,description:"",completed:!1,priority:V.Low,startDate:"",deadline:"",todoListId:et,order:0,addedDate:"",entityStatus:"idle"}]),Et=function(t,e,a){return function(n,r){n(g("loading"));var i=r().tasks[a].find((function(e){return e.id===t}));i&&ft(a,t,Object(T.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},e)).then((function(r){0===r.data.resultCode?(n(function(t,e,a){return{type:"UPDATE-TASK",taskId:t,model:e,todolistId:a}}(t,e,a)),n(g("succeeded"))):N(r.data,n)})).catch((function(t){P(t,n)}))}},Ot=r.a.memo((function(t){var e=Object(p.b)(),a=Object(n.useCallback)((function(a){e(Et(t.task.id,{title:a},t.todolistId))}),[e,t.todolistId,t.task.id]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{key:t.task.id,className:t.task.status===H.Completed?"is-done":""},r.a.createElement(W.a,{color:"primary",inputProps:{"aria-label":"secondary checkbox"},onChange:function(a){var n=a.currentTarget.checked?H.Completed:H.New;e(Et(t.task.id,{status:n},t.todolistId))},checked:t.task.status===H.Completed,disabled:t.disabled}),r.a.createElement(ct,{value:t.task.title,newTitle:a,disabled:t.disabled}),r.a.createElement(f.a,{onClick:function(){return e((a=t.todolistId,n=t.task.id,function(t){t(g("loading")),t(function(t,e,a){return{type:"SET-TASK-ENTITY-STATUS",todolistId:t,taskId:e,entityStatus:a}}(a,n,"loading")),mt(a,n).then((function(e){0===e.data.resultCode?(t(function(t,e){return{type:"REMOVE-TASK",taskId:e,todolistId:t}}(a,n)),t(g("succeeded"))):N(e.data,t)})).catch((function(e){P(e,t)}))}));var a,n},disabled:t.disabled},r.a.createElement(ot.a,null))))})),pt=function(t){var e=Object(p.c)((function(e){return e.tasks[t.todolist.id]})),a=Object(p.b)();Object(n.useEffect)((function(){var e;a((e=t.todolist.id,function(t){t(g("loading")),st(e).then((function(a){var n=a.data.items;t(function(t,e){return{type:"SET-TASK",tasks:t,todolistId:e}}(n,e)),t(g("succeeded"))}))}))}),[a,t.todolist.id]);var i=Object(n.useCallback)((function(){t.removeTodolist(t.todolist.id)}),[t]),c=Object(n.useCallback)((function(e){a(function(t,e){return function(a){a(g("loading")),dt(t,e).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;a(function(t){return{type:"ADD-TASK",task:t}}(e)),a(g("succeeded"))}else N(t.data,a)})).catch((function(t){P(t,a)}))}}(t.todolist.id,e))}),[a,t]),o=Object(n.useCallback)((function(e){t.newTodolistTitle(t.todolist.id,e)}),[t]),l=Object(n.useCallback)((function(){return t.changeFilter("all",t.todolist.id)}),[t]),u=Object(n.useCallback)((function(){return t.changeFilter("active",t.todolist.id)}),[t]),s=Object(n.useCallback)((function(){return t.changeFilter("completed",t.todolist.id)}),[t]),d=e,b=d;return"active"===t.todolist.filter&&(b=d.filter((function(t){return!t.status}))),"completed"===t.todolist.filter&&(b=d.filter((function(t){return t.status}))),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(ct,{value:t.todolist.title,newTitle:o,disabled:"loading"===t.todolist.entityStatus}),r.a.createElement(f.a,{"aria-label":"delete",onClick:i,disabled:"loading"===t.todolist.entityStatus},r.a.createElement(ot.a,null))),r.a.createElement(it,{addTask:c,disabled:"loading"===t.todolist.entityStatus}),r.a.createElement("ul",{className:"tasks_container"},b.map((function(e){return r.a.createElement(Ot,{task:e,todolistId:t.todolist.id,key:e.id,disabled:"loading"===e.entityStatus})}))),r.a.createElement("div",{className:"btns_container"},r.a.createElement(m.a,{color:"inherit",onClick:l,variant:"all"===t.todolist.filter?"outlined":"text"},"All"),r.a.createElement(m.a,{color:"primary",onClick:u,variant:"active"===t.todolist.filter?"outlined":"text"},"Active"),r.a.createElement(m.a,{color:"secondary",onClick:s,variant:"completed"===t.todolist.filter?"outlined":"text"},"Completed")))},Tt=function(){var t=Object(p.c)((function(t){return t.todolists})),e=Object(p.b)();Object(n.useEffect)((function(){s&&e((function(t){t(g("loading")),k().then((function(e){t({type:"SET-TODOLIST",todolists:e.data}),t(g("succeeded"))})).catch((function(e){P(e,t)}))}))}),[e]);var a=Object(n.useCallback)((function(t){var a;e((a=t,function(t){t(g("loading")),t({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:a,entityStatus:"loading"}),A(a).then((function(e){0===e.data.resultCode?(t(function(t){return{type:"REMOVE-TODOLIST",id:t}}(a)),t(g("succeeded"))):N(e.data,t)})).catch((function(e){P(e,t)}))}))}),[e]),i=Object(n.useCallback)((function(t,a){e(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",filter:t,id:e}}(t,a))}),[e]),c=Object(n.useCallback)((function(t){e(function(t){return function(e){e(g("loading")),y(t).then((function(t){if(0===t.data.resultCode){var a=t.data.data.item;e({type:"ADD-TODOLIST",todolist:a}),e(g("succeeded"))}else N(t.data,e)})).catch((function(t){P(t,e)}))}}(t))}),[e]),o=Object(n.useCallback)((function(t,a){var n,r;e((n=t,r=a,function(t){t(g("loading")),C(n,r).then((function(e){0===e.data.resultCode?(t(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(n,r)),t(g("succeeded"))):N(e.data,t)})).catch((function(e){P(e,t)}))}))}),[e]),s=Object(p.c)((function(t){return t.auth.isLoggedIn}));return s?r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{fixed:!0},r.a.createElement(u.a,{container:!0,style:{padding:"20px 0"}},r.a.createElement(it,{addTask:c})),r.a.createElement(u.a,{container:!0,spacing:4},t.map((function(t){return r.a.createElement(u.a,{item:!0,key:t.id},r.a.createElement(Q.a,{style:{padding:"10px"},elevation:3},r.a.createElement(pt,{key:t.id,todolist:t,removeTodolist:a,changeFilter:i,newTodolistTitle:o})))}))))):r.a.createElement(Y.a,{to:"/login"})},vt=function(){var t=Object(p.c)((function(t){return t.auth.isInitialized})),e=Object(p.b)();return Object(n.useEffect)((function(){e((function(t){L().then((function(e){0===e.data.resultCode?(t({type:"login/SET-INITIALIZED",value:!0}),t(x(!0))):N(e.data,t)})).catch((function(e){P(e,t)}))}))}),[]),t?r.a.createElement("div",{className:"App"},r.a.createElement(M,null),r.a.createElement(F,null),r.a.createElement(l.a,{fixed:!0},r.a.createElement(u.a,{container:!0,justify:"center",spacing:4},r.a.createElement(Y.d,null,r.a.createElement(Y.b,{exact:!0,path:"/",render:function(){return r.a.createElement(Tt,null)}}),r.a.createElement(Y.b,{path:"/login",render:function(){return r.a.createElement($,null)}}),r.a.createElement(Y.b,{path:"/404",render:function(){return r.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),r.a.createElement(Y.a,{from:"*",to:"/404"}))))):r.a.createElement("div",{style:{position:"fixed",top:"50%",textAlign:"center",width:"100%"}},r.a.createElement(o.a,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var gt=a(64),ht=a(94),jt=Object(gt.b)({todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"ADD-TODOLIST":var a=Object(T.a)(Object(T.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"});return[a].concat(Object(X.a)(t));case"CHANGE-TODOLIST-TITLE":var n=t.find((function(t){return t.id===e.id}));return n&&(n.title=e.title),Object(X.a)(t);case"CHANGE-TODOLIST-FILTER":var r=t.find((function(t){return t.id===e.id}));return r&&(r.filter=e.filter),Object(X.a)(t);case"SET-TODOLIST":return e.todolists.map((function(t){return Object(T.a)(Object(T.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(T.a)(Object(T.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":var a=Object(T.a)({},t),n=t[e.todolistId];return a[e.todolistId]=n.filter((function(t){return t.id!==e.taskId})),a;case"ADD-TASK":var r=Object(T.a)({},t),i=e.task,c=r[i.todoListId],o=[i].concat(Object(X.a)(c));return r[i.todoListId]=o,r;case"SET-TASK":var l=Object(T.a)({},t);return l[e.todolistId]=e.tasks,l;case"UPDATE-TASK":var u=Object(T.a)({},t),s=u[e.todolistId];return u[e.todolistId]=s.map((function(t){return t.id===e.taskId?Object(T.a)(Object(T.a)({},t),e.model):t})),u;case"NEW-TASK-TITLE":var d=Object(T.a)({},t);return d[e.todolistId]=d[e.todolistId].map((function(t){return t.id===e.taskId?Object(T.a)(Object(T.a)({},t),{},{title:e.newTitle}):t})),d;case"ADD-TODOLIST":return Object(T.a)(Object(T.a)({},t),{},Object(lt.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var f=Object(T.a)({},t);return delete f[e.id],f;case"SET-TODOLIST":var m=Object(T.a)({},t);return e.todolists.forEach((function(t){m[t.id]=[]})),m;case"SET-TASK-ENTITY-STATUS":var b=Object(T.a)({},t);return b[e.todolistId]=b[e.todolistId].map((function(t){return t.id===e.taskId?Object(T.a)(Object(T.a)({},t),{},{entityStatus:e.entityStatus}):t})),b;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(T.a)(Object(T.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(T.a)(Object(T.a)({},t),{},{error:e.error});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET-IS-LOGGED-IN":return Object(T.a)(Object(T.a)({},t),{},{isLoggedIn:e.value});case"login/SET-INITIALIZED":return Object(T.a)(Object(T.a)({},t),{},{isInitialized:e.value});default:return t}}}),It=Object(gt.c)(jt,Object(gt.a)(ht.a)),St=a(48);c.a.render(r.a.createElement(p.a,{store:It},r.a.createElement(St.a,null,r.a.createElement(vt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[107,1,2]]]);
//# sourceMappingURL=main.788396ad.chunk.js.map