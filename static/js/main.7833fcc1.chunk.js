(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{107:function(e,t,a){e.exports=a(143)},112:function(e,t,a){},113:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=(a(112),a(188)),l=a(182),s=(a(113),a(174)),u=a(178),d=a(179),m=a(180),f=a(181),b=a(91),E=a.n(b),O=a(12),p=a(7),T={status:"loading",error:null},g=function(e){return{type:"APP/SET-STATUS",status:e}},v=function(e){return{type:"APP/SET-ERROR",error:e}},h=a(57),j=a.n(h),I=j.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"94c9f385-f2db-498c-b99f-a10b7cce6547"}}),S=function(){return I.get("todo-lists")},k=function(e){return I.post("todo-lists",{title:e})},y=function(e,t){return I.put("todo-lists/".concat(e),{title:t})},C=function(e){return I.delete("todo-lists/".concat(e))},A=function(e){return I.post("auth/login",e)},w=function(){return I.get("auth/me")},L=function(){return I.delete("auth/login")},D=function(e,t){e.messages.length?t(v(e.messages[0])):t(v("Some error occurred")),t(g("failed"))},N=function(e,t){t(v(e.message)),t(g("failed"))},P={isLoggedIn:!1,isInitialized:!1},R=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},F=function(){var e=Object(O.c)((function(e){return e.app.status})),t=Object(O.c)((function(e){return e.auth.isLoggedIn})),a=Object(O.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{position:"static"},r.a.createElement(u.a,{className:"header"},r.a.createElement(d.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(E.a,null)),t&&r.a.createElement(m.a,{color:"inherit",onClick:function(){a((function(e){e(g("loading")),L().then((function(t){0===t.data.resultCode?(e(R(!1)),e(g("succeeded"))):D(t.data,e)})).catch((function(t){N(t,e)}))}))}},"LogOut"))),r.a.createElement("div",null,"loading"===e&&r.a.createElement(f.a,null)))},K=a(193),U=a(190);function x(e){return r.a.createElement(U.a,Object.assign({elevation:6,variant:"filled"},e))}function G(){var e=Object(O.c)((function(e){return e.app.error})),t=Object(O.b)(),a=function(e,a){t(v(null))};return r.a.createElement(K.a,{open:null!==e,autoHideDuration:6e3,onClose:a},r.a.createElement(x,{onClose:a,severity:"error"},e))}var M,H,V=a(15),Y=a(183),Z=a(184),_=a(185),q=a(189),z=a(194),B=a(191),W=a(95),J=function(){var e=Object(O.b)(),t=Object(O.c)((function(e){return e.auth.isLoggedIn})),a=Object(W.a)({initialValues:{email:"cheptsova.liza@mail.ru",password:"7646412qwe",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<5&&(t.password="Must be more then 5 characters"):t.password="Required",t},onSubmit:function(t){var n;e((n=t,function(e){e(g("loading")),A(n).then((function(t){0===t.data.resultCode?(e(R(!0)),e(g("succeeded"))):D(t.data,e)})).catch((function(t){N(t,e)}))})),a.resetForm()}});return t?r.a.createElement(V.a,{to:"/"}):r.a.createElement(l.a,{container:!0,justify:"center",alignItems:"center",className:"height_login"},r.a.createElement(l.a,{item:!0},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement(Y.a,null,r.a.createElement(Z.a,null,r.a.createElement("p",null,"To log in get registered",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(_.a,null,r.a.createElement(q.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?r.a.createElement("div",{style:{color:"red"}},a.errors.email):null,r.a.createElement(q.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password?r.a.createElement("div",{style:{color:"red"}},a.errors.password):null,r.a.createElement(z.a,{label:"Remember me",className:"mb",control:r.a.createElement(B.a,a.getFieldProps("rememberMe"))}),r.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},$=a(144),Q=a(46),X=a(54),ee=Object(X.v1)(),te=(Object(X.v1)(),[]),ae=a(47),ne=a(186),re=r.a.memo((function(e){var t=Object(n.useState)(""),a=Object(ae.a)(t,2),i=a[0],c=a[1],o=Object(n.useState)(null),l=Object(ae.a)(o,2),s=l[0],u=l[1],m=function(){""!==i.trim()?(e.addTask(i),c("")):u("Title is required")};return r.a.createElement("div",null,r.a.createElement(q.a,{value:i,disabled:e.disabled,label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442",helperText:s,error:!!s,onChange:function(e){e.preventDefault(),c(e.currentTarget.value)},onKeyPress:function(e){null!==s&&u(null),13===e.charCode&&m()},color:"primary",variant:"outlined"}),r.a.createElement(d.a,{color:"primary",onClick:m,disabled:e.disabled},r.a.createElement(ne.a,null)))})),ie=r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(ae.a)(t,2),i=a[0],c=a[1],o=Object(n.useState)(e.value),l=Object(ae.a)(o,2),s=l[0],u=l[1];console.log("props.disabled: ",e.disabled);var d=function(){c(!i),""!==s.trim()&&e.newTitle(s)};return i?r.a.createElement(q.a,{type:"text",value:s,onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:d,onKeyPress:function(e){13===e.charCode&&d()}}):r.a.createElement("span",{onDoubleClick:function(){c(!i),u(e.value),e.disabled&&c(!1)}},e.value)})),ce=a(187),oe=a(49),le=j.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1//todo-lists/",withCredentials:!0,headers:{"API-KEY":"94c9f385-f2db-498c-b99f-a10b7cce6547"}});!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(M||(M={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(H||(H={}));var se=function(e){return le.get("".concat(e,"/tasks"))},ue=function(e,t){return le.post("".concat(e,"/tasks"),{title:t})},de=function(e,t,a){return le.put("".concat(e,"/tasks/").concat(t),a)},me=function(e,t){return le.delete("".concat(e,"/tasks/").concat(t))},fe=Object(oe.a)({},ee,[{id:Object(X.v1)(),title:"HTML",status:M.Completed,description:"",completed:!1,priority:H.Low,startDate:"",deadline:"",todoListId:ee,order:0,addedDate:"",entityStatus:"idle"}]),be=function(e,t,a){return function(n,r){n(g("loading"));var i=r().tasks[a].find((function(t){return t.id===e}));i&&de(a,e,Object(p.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},t)).then((function(r){0===r.data.resultCode?(n(function(e,t,a){return{type:"UPDATE-TASK",taskId:e,model:t,todolistId:a}}(e,t,a)),n(g("succeeded"))):D(r.data,n)})).catch((function(e){N(e,n)}))}},Ee=r.a.memo((function(e){var t=Object(O.b)(),a=Object(n.useCallback)((function(a){t(be(e.task.id,{title:a},e.todolistId))}),[t,e.todolistId,e.task.id]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{key:e.task.id,className:e.task.status===M.Completed?"is-done":""},r.a.createElement(B.a,{color:"primary",inputProps:{"aria-label":"secondary checkbox"},onChange:function(a){var n=a.currentTarget.checked?M.Completed:M.New;t(be(e.task.id,{status:n},e.todolistId))},checked:e.task.status===M.Completed,disabled:e.disabled}),r.a.createElement(ie,{value:e.task.title,newTitle:a,disabled:e.disabled}),r.a.createElement(d.a,{onClick:function(){return t((a=e.todolistId,n=e.task.id,function(e){e(g("loading")),e(function(e,t,a){return{type:"SET-TASK-ENTITY-STATUS",todolistId:e,taskId:t,entityStatus:a}}(a,n,"loading")),me(a,n).then((function(t){0===t.data.resultCode?(e(function(e,t){return{type:"REMOVE-TASK",taskId:t,todolistId:e}}(a,n)),e(g("succeeded"))):D(t.data,e)})).catch((function(t){N(t,e)}))}));var a,n},disabled:e.disabled},r.a.createElement(ce.a,null))))})),Oe=function(e){var t=Object(O.c)((function(t){return t.tasks[e.todolist.id]})),a=Object(O.b)();Object(n.useEffect)((function(){var t;a((t=e.todolist.id,function(e){e(g("loading")),se(t).then((function(a){var n=a.data.items;e(function(e,t){return{type:"SET-TASK",tasks:e,todolistId:t}}(n,t)),e(g("succeeded"))}))}))}),[a,e.todolist.id]);var i=Object(n.useCallback)((function(){e.removeTodolist(e.todolist.id)}),[e]),c=Object(n.useCallback)((function(t){a(function(e,t){return function(a){a(g("loading")),ue(e,t).then((function(e){if(0===e.data.resultCode){var t=e.data.data.item;a(function(e){return{type:"ADD-TASK",task:e}}(t)),a(g("succeeded"))}else D(e.data,a)})).catch((function(e){N(e,a)}))}}(e.todolist.id,t))}),[a,e]),o=Object(n.useCallback)((function(t){e.newTodolistTitle(e.todolist.id,t)}),[e]),l=Object(n.useCallback)((function(){return e.changeFilter("all",e.todolist.id)}),[e]),s=Object(n.useCallback)((function(){return e.changeFilter("active",e.todolist.id)}),[e]),u=Object(n.useCallback)((function(){return e.changeFilter("completed",e.todolist.id)}),[e]),f=t,b=f;return"active"===e.todolist.filter&&(b=f.filter((function(e){return!e.status}))),"completed"===e.todolist.filter&&(b=f.filter((function(e){return e.status}))),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(ie,{value:e.todolist.title,newTitle:o,disabled:"loading"===e.todolist.entityStatus}),r.a.createElement(d.a,{"aria-label":"delete",onClick:i,disabled:"loading"===e.todolist.entityStatus},r.a.createElement(ce.a,null))),r.a.createElement(re,{addTask:c,disabled:"loading"===e.todolist.entityStatus}),r.a.createElement("ul",{className:"tasks_container"},b.map((function(t){return r.a.createElement(Ee,{task:t,todolistId:e.todolist.id,key:t.id,disabled:"loading"===t.entityStatus})}))),r.a.createElement("div",{className:"btns_container"},r.a.createElement(m.a,{color:"inherit",onClick:l,variant:"all"===e.todolist.filter?"outlined":"text"},"All"),r.a.createElement(m.a,{color:"primary",onClick:s,variant:"active"===e.todolist.filter?"outlined":"text"},"Active"),r.a.createElement(m.a,{color:"secondary",onClick:u,variant:"completed"===e.todolist.filter?"outlined":"text"},"Completed")))},pe=function(){var e=Object(O.c)((function(e){return e.todolists})),t=Object(O.c)((function(e){return e.auth.isLoggedIn})),a=Object(O.b)();Object(n.useEffect)((function(){t&&a((function(e){e(g("loading")),S().then((function(t){e({type:"SET-TODOLIST",todolists:t.data}),e(g("succeeded"))})).catch((function(t){N(t,e)}))}))}),[a]);var i=Object(n.useCallback)((function(e){var t;a((t=e,function(e){e(g("loading")),e({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:t,entityStatus:"loading"}),C(t).then((function(a){0===a.data.resultCode?(e(function(e){return{type:"REMOVE-TODOLIST",id:e}}(t)),e(g("succeeded"))):D(a.data,e)})).catch((function(t){N(t,e)}))}))}),[a]),c=Object(n.useCallback)((function(e,t){a(function(e,t){return{type:"CHANGE-TODOLIST-FILTER",filter:e,id:t}}(e,t))}),[a]),s=Object(n.useCallback)((function(e){a(function(e){return function(t){t(g("loading")),k(e).then((function(e){if(0===e.data.resultCode){var a=e.data.data.item;t({type:"ADD-TODOLIST",todolist:a}),t(g("succeeded"))}else D(e.data,t)})).catch((function(e){N(e,t)}))}}(e))}),[a]),u=Object(n.useCallback)((function(e,t){var n,r;a((n=e,r=t,function(e){e(g("loading")),y(n,r).then((function(t){0===t.data.resultCode?(e(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",id:e,title:t}}(n,r)),e(g("succeeded"))):D(t.data,e)})).catch((function(t){N(t,e)}))}))}),[a]);return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{fixed:!0},r.a.createElement(l.a,{container:!0,style:{padding:"20px 0"}},r.a.createElement(re,{addTask:s})),r.a.createElement(l.a,{container:!0,spacing:4},e.map((function(e){return r.a.createElement(l.a,{item:!0,key:e.id},r.a.createElement($.a,{style:{padding:"10px"},elevation:3},r.a.createElement(Oe,{key:e.id,todolist:e,removeTodolist:i,changeFilter:c,newTodolistTitle:u})))}))))):r.a.createElement(V.a,{to:"/login"})},Te=function(){Object(O.c)((function(e){return e.auth.isInitialized}));var e=Object(O.b)();return Object(n.useEffect)((function(){e((function(e){w().then((function(t){0===t.data.resultCode?(e({type:"login/SET-INITIALIZED",value:!0}),e(R(!0))):D(t.data,e)})).catch((function(t){N(t,e)}))}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(G,null),r.a.createElement(F,null),r.a.createElement(o.a,{fixed:!0,className:"container"},r.a.createElement(l.a,{container:!0,justify:"center",spacing:4},r.a.createElement(V.d,null,r.a.createElement(V.b,{exact:!0,path:"/",render:function(){return r.a.createElement(pe,null)}}),r.a.createElement(V.b,{path:"/login",render:function(){return r.a.createElement(J,null)}}),r.a.createElement(V.b,{path:"/404",render:function(){return r.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),r.a.createElement(V.a,{from:"*",to:"/404"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ge=a(64),ve=a(94),he=Object(ge.b)({todolists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.id}));case"ADD-TODOLIST":var a=Object(p.a)(Object(p.a)({},t.todolist),{},{filter:"all",entityStatus:"idle"});return[a].concat(Object(Q.a)(e));case"CHANGE-TODOLIST-TITLE":var n=e.find((function(e){return e.id===t.id}));return n&&(n.title=t.title),Object(Q.a)(e);case"CHANGE-TODOLIST-FILTER":var r=e.find((function(e){return e.id===t.id}));return r&&(r.filter=t.filter),Object(Q.a)(e);case"SET-TODOLIST":return t.todolists.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-ENTITY-STATUS":return e.map((function(e){return e.id===t.id?Object(p.a)(Object(p.a)({},e),{},{entityStatus:t.entityStatus}):e}));default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TASK":var a=Object(p.a)({},e),n=e[t.todolistId];return a[t.todolistId]=n.filter((function(e){return e.id!==t.taskId})),a;case"ADD-TASK":var r=Object(p.a)({},e),i=t.task,c=r[i.todoListId],o=[i].concat(Object(Q.a)(c));return r[i.todoListId]=o,r;case"SET-TASK":var l=Object(p.a)({},e);return l[t.todolistId]=t.tasks,l;case"UPDATE-TASK":var s=Object(p.a)({},e),u=s[t.todolistId];return s[t.todolistId]=u.map((function(e){return e.id===t.taskId?Object(p.a)(Object(p.a)({},e),t.model):e})),s;case"NEW-TASK-TITLE":var d=Object(p.a)({},e);return d[t.todolistId]=d[t.todolistId].map((function(e){return e.id===t.taskId?Object(p.a)(Object(p.a)({},e),{},{title:t.newTitle}):e})),d;case"ADD-TODOLIST":return Object(p.a)(Object(p.a)({},e),{},Object(oe.a)({},t.todolist.id,[]));case"REMOVE-TODOLIST":var m=Object(p.a)({},e);return delete m[t.id],m;case"SET-TODOLIST":var f=Object(p.a)({},e);return t.todolists.forEach((function(e){f[e.id]=[]})),f;case"SET-TASK-ENTITY-STATUS":var b=Object(p.a)({},e);return b[t.todolistId]=b[t.todolistId].map((function(e){return e.id===t.taskId?Object(p.a)(Object(p.a)({},e),{},{entityStatus:t.entityStatus}):e})),b;default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(p.a)(Object(p.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(p.a)(Object(p.a)({},e),{},{error:t.error});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(p.a)(Object(p.a)({},e),{},{isLoggedIn:t.value});case"login/SET-INITIALIZED":return Object(p.a)(Object(p.a)({},e),{},{isInitialized:t.value});default:return e}}}),je=Object(ge.c)(he,Object(ge.a)(ve.a)),Ie=a(48);c.a.render(r.a.createElement(O.a,{store:je},r.a.createElement(Ie.a,null,r.a.createElement(Te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[107,1,2]]]);
//# sourceMappingURL=main.7833fcc1.chunk.js.map